[tools]
bun = "1.2.17"

[tasks.dev]
run = "bun src/cli.ts"

[tasks.install]
run = "bun install"

[tasks.test]
run = "mise run install && bunx vitest run"

[tasks.ci]
run = "mise run test"

[tasks.build]
run = "mise run install && bun scripts/build-release.ts"

[tasks.render-homebrew-formula]
run = "mise run install && bun scripts/render-homebrew-formula.ts"

[tasks.render-chocolatey-package]
run = "mise run install && bun scripts/render-chocolatey-package.ts"

[tasks.render-winget-manifest]
run = "mise run install && bun scripts/render-winget-manifest.ts"

[tasks.docker-smoke]
run = "mise run build -- --targets=linux-x64-musl,linux-arm64-musl && docker build --platform=linux/amd64 -t skillet:local . && docker run --rm --platform=linux/amd64 skillet:local --help"
